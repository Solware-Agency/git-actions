name: Reusable Discord Notifier

on:
  workflow_call:
    secrets:
      DISCORD_WEBHOOK_URL:
        required: true

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Discord Notification
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          # El 'status' lo tomamos del workflow que nos llama
          status: ${{ job.status }}
          title: "ðŸ“¢ Cambio en: ${{ github.repository }}"
          description: |
            **Evento:** `${{ github.event_name }}`
            **Autor:** `${{ github.actor }}`
            **Mensaje:** ${{ github.event.head_commit.message || github.event.pull_request.title }}
          url: ${{ github.event.html_url || github.event.pull_request.html_url }}
          color: 0x5865F2
          username: GitHub Central Bot
